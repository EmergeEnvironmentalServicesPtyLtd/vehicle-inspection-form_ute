<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vehicle Inspection Checklist</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 15px; }
    h1, h2, h3 { text-align: center; }
    .hidden { display: none; }
    .menu { text-align: center; margin-top: 50px; }
    .menu button {
      margin: 10px;
      padding: 15px 40px;
      font-size: 20px;
      border-radius: 8px;
      border: none;
      background: #007bff;
      color: white;
      cursor: pointer;
    }
    .menu button:hover { background: #0056b3; }
    .section { border: 1px solid #ccc; padding: 15px; margin: 15px 0; border-radius: 8px; }
    .vehicle-img { width: 100%; margin: 15px 0; border: 1px solid #ccc; border-radius: 6px; }
    .back { margin-bottom: 20px; }
    .marker { position: absolute; font-size: 20px; font-weight: bold; pointer-events: none; }
    .logo { max-width: 300px; height: auto; margin-bottom: 20px; display:block; margin-left:auto; margin-right:auto; }
    .vehicle-container { position: relative; }
  </style>
</head>
<body>
  <!-- Landing Page -->
  <div id="menu" class="menu">
    <img class="logo" src="data:image/png;base64,PUT-LOGO-BASE64" alt="Emerge Associates Logo">
    <h1>Vehicle Inspection Checklist</h1>
    <button onclick="showForm('ute')">Ute</button>
    <button onclick="showForm('prado')">SUV</button>
  </div>

  <!-- Checklist Form -->
  <div id="form" class="hidden">
    <button class="back" onclick="goBack()">‚Üê Back</button>
    <img class="logo" src="data:image/png;base64,PUT-LOGO-BASE64" alt="Emerge Associates Logo">
    <h2 id="formTitle"></h2>

    <!-- Vehicle Information -->
    <div class="section">
      <h3>Vehicle Information</h3>
      <label>Date: <input type="date"></label><br>
      <label>Registration: <input type="text"></label><br>
      <label>Inspector Name: <input type="text"></label><br>
      <label>Vehicle Make: <input type="text" value="Toyota"></label><br>
      <label>Vehicle Model: <input type="text"></label><br>
      <label>Odometer: <input type="number"></label>
    </div>

    <!-- Exterior -->
    <div class="section">
      <h3>Exterior Checks</h3>
      <label><input type="checkbox"> Windscreen/windows condition</label><br>
      <label><input type="checkbox"> Lights working (headlights, brake, indicators, reverse)</label><br>
      <label><input type="checkbox"> Tyres tread/pressure + spare</label><br>
      <label><input type="checkbox"> Mirrors intact</label><br>
      <label><input type="checkbox"> Body panels (no damage)</label>
    </div>

    <!-- Interior -->
    <div class="section">
      <h3>Interior Checks</h3>
      <label><input type="checkbox"> Dashboard warning lights off</label><br>
      <label><input type="checkbox"> Interior clean</label>
    </div>

    <!-- Safety -->
    <div class="section">
      <h3>Safety Equipment</h3>
      <label><input type="checkbox"> First aid kit sighted</label><br>
      <label><input type="checkbox"> Fire extinguisher sighted</label><br>
      <label><input type="checkbox"> Maxtrax Set sighted</label>
    </div>

    <!-- Vehicle Diagrams -->
    <div class="section">
      <h3>Vehicle Diagrams</h3>
      <p>Select marker type:</p>
      <button type="button" onclick="setMarker('X')">Scratch (X)</button>
      <button type="button" onclick="setMarker('O')">Dent (O)</button>
      <div id="vehicleImages"></div>
    </div>

    <!-- Comments -->
    <div class="section">
      <h3>Comments / Issues</h3>
      <textarea rows="5" style="width:100%;"></textarea>
    </div>

    <!-- Signature -->
    <div class="section">
      <h3>Inspector Signature</h3>
      <canvas id="signature" width="300" height="150" style="border:1px solid #000; width:100%;"></canvas><br>
      <button type="button" onclick="clearSignature()">Clear</button>
    </div>

    <button type="submit">Submit</button>
  </div>

  <script>
    let currentMarker = "X";

    function setMarker(type) {
      currentMarker = type;
    }

    function showForm(type) {
      document.getElementById('menu').classList.add('hidden');
      document.getElementById('form').classList.remove('hidden');
      document.getElementById('formTitle').innerText = type === 'ute' ? "Ute Checklist" : "SUV Checklist";

      const images = {
        ute: [
          "data:image/jpeg;base64,PUT-UTE-FRONT",
          "data:image/jpeg;base64,PUT-UTE-REAR",
          "data:image/jpeg;base64,PUT-UTE-DRIVER",
          "data:image/jpeg;base64,PUT-UTE-PASSENGER",
          "data:image/jpeg;base64,PUT-UTE-TOP"
        ],
        prado: [
          "data:image/jpeg;base64,PUT-PRADO-FRONT",
          "data:image/jpeg;base64,PUT-PRADO-REAR",
          "data:image/jpeg;base64,PUT-PRADO-DRIVER",
          "data:image/jpeg;base64,PUT-PRADO-PASSENGER",
          "data:image/jpeg;base64,PUT-PRADO-TOP"
        ]
      };

      const container = document.getElementById('vehicleImages');
      container.innerHTML = "";
      images[type].forEach(src => {
        const div = document.createElement("div");
        div.className = "vehicle-container";
        const img = document.createElement('img');
        img.src = src;
        img.className = "vehicle-img";
        img.onclick = (event) => placeMarker(event, div);
        div.appendChild(img);
        container.appendChild(div);
      });
    }

    function placeMarker(event, container) {
      const rect = container.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const y = event.clientY - rect.top;

      const marker = document.createElement("div");
      marker.innerText = currentMarker;
      marker.className = "marker";
      marker.style.left = (x - 8) + "px";
      marker.style.top = (y - 8) + "px";
      marker.style.color = currentMarker === "X" ? "red" : "blue";

      container.appendChild(marker);
    }

    function goBack() {
      document.getElementById('form').classList.add('hidden');
      document.getElementById('menu').classList.remove('hidden');
    }

    // Signature
    const canvas = document.getElementById("signature");
    const ctx = canvas.getContext("2d");
    let drawing = false;

    function startDraw(e) { drawing = true; draw(e); }
    function endDraw() { drawing = false; ctx.beginPath(); }
    function draw(e) {
      if (!drawing) return;
      e.preventDefault();
      const rect = canvas.getBoundingClientRect();
      const x = (e.clientX || e.touches[0].clientX) - rect.left;
      const y = (e.clientY || e.touches[0].clientY) - rect.top;
      ctx.lineWidth = 2;
      ctx.lineCap = "round";
      ctx.strokeStyle = "black";
      ctx.lineTo(x, y);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(x, y);
    }

    canvas.addEventListener("mousedown", startDraw);
    canvas.addEventListener("mouseup", endDraw);
    canvas.addEventListener("mousemove", draw);
    canvas.addEventListener("touchstart", startDraw);
    canvas.addEventListener("touchend", endDraw);
    canvas.addEventListener("touchmove", draw);

    function clearSignature() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }
  </script>
</body>
</html>
