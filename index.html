
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vehicle Inspection Form</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f4f4f4; }
    .container { max-width: 900px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; }
    h1, h2 { text-align: center; }
    .logo { display: block; margin: 0 auto 20px; max-width: 300px; }
    .button { display: block; width: 100%; padding: 15px; margin: 10px 0; font-size: 18px; background: #2d3e50; color: white; text-align: center; border-radius: 8px; cursor: pointer; text-decoration: none; }
    .button:hover { background: #1a252f; }
    .form-section { display: none; }
    .vehicle-img { width: 100%; max-width: 600px; border: 1px solid #ccc; margin: 10px 0; position: relative; }
    .signature-pad { border: 2px solid #000; width: 100%; height: 200px; }
    textarea { width: 100%; height: 100px; background: #e6ecff; }
    .marker { color: red; font-weight: bold; position: absolute; transform: translate(-50%, -50%); }
    .form-buttons { text-align: center; margin-top: 20px; }
    .emoji { font-size: 20px; margin-right: 10px; }
  </style>
</head>
<body>
  <div class="container">
    <img src="data:image/png;base64,{{LOGO}}" alt="Emerge Logo" class="logo">
    <h1>Choose Vehicle Type</h1>
    <a class="button" onclick="showForm('ute')"><span class="emoji">ðŸ›»</span> Ute Inspection</a>
    <a class="button" onclick="showForm('suv')"><span class="emoji">ðŸš™</span> SUV Inspection</a>

    <!-- UTE FORM -->
    <div id="uteForm" class="form-section">
      <h2>Ute Inspection Form</h2>
      <label>Date: <input type="date"></label><br><br>
      <label>Registration: <input type="text"></label><br><br>
      <label>Vehicle Make: <input type="text"></label><br><br>
      <label>Vehicle Model: <input type="text"></label><br><br>
      <label>Odometer: <input type="text"></label><br><br>

      <h3>Damage Markup</h3>
      <label><input type="radio" name="markerType" value="X" checked> Scratch (X)</label>
      <label><input type="radio" name="markerType" value="O"> Dent (O)</label>

      <h4>Driver Side</h4>
      <div class="vehicle-img" onclick="placeMarker(event, this)"><img src="data:image/jpeg;base64,{{UTE_DRIVER}}" width="100%"></div>
      <h4>Passenger Side</h4>
      <div class="vehicle-img" onclick="placeMarker(event, this)"><img src="data:image/jpeg;base64,{{UTE_PASSENGER}}" width="100%"></div>
      <h4>Top View</h4>
      <div class="vehicle-img" onclick="placeMarker(event, this)"><img src="data:image/jpeg;base64,{{UTE_TOP}}" width="100%"></div>
      <h4>Front View</h4>
      <div class="vehicle-img" onclick="placeMarker(event, this)"><img src="data:image/jpeg;base64,{{UTE_FRONT}}" width="100%"></div>

      <h3>Comments / Issues</h3>
      <textarea></textarea>

      <h3>Inspector Signature</h3>
      <canvas id="signatureUte" class="signature-pad"></canvas><br>
      <button onclick="clearSignature('signatureUte')">Clear Signature</button>

      <div class="form-buttons">
        <button onclick="window.print()">Save / Print Form</button>
      </div>
    </div>

    <!-- SUV FORM -->
    <div id="suvForm" class="form-section">
      <h2>SUV Inspection Form</h2>
      <label>Date: <input type="date"></label><br><br>
      <label>Registration: <input type="text"></label><br><br>
      <label>Vehicle Make: <input type="text"></label><br><br>
      <label>Vehicle Model: <input type="text"></label><br><br>
      <label>Odometer: <input type="text"></label><br><br>

      <h3>Damage Markup</h3>
      <label><input type="radio" name="markerTypeSuv" value="X" checked> Scratch (X)</label>
      <label><input type="radio" name="markerTypeSuv" value="O"> Dent (O)</label>

      <h4>Driver Side</h4>
      <div class="vehicle-img" onclick="placeMarker(event, this)"><img src="data:image/jpeg;base64,{{SUV_DRIVER}}" width="100%"></div>
      <h4>Passenger Side</h4>
      <div class="vehicle-img" onclick="placeMarker(event, this)"><img src="data:image/jpeg;base64,{{SUV_PASSENGER}}" width="100%"></div>
      <h4>Top View</h4>
      <div class="vehicle-img" onclick="placeMarker(event, this)"><img src="data:image/jpeg;base64,{{SUV_TOP}}" width="100%"></div>
      <h4>Front View</h4>
      <div class="vehicle-img" onclick="placeMarker(event, this)"><img src="data:image/jpeg;base64,{{SUV_FRONT}}" width="100%"></div>
      <h4>Rear View</h4>
      <div class="vehicle-img" onclick="placeMarker(event, this)"><img src="data:image/jpeg;base64,{{SUV_REAR}}" width="100%"></div>

      <h3>Comments / Issues</h3>
      <textarea></textarea>

      <h3>Inspector Signature</h3>
      <canvas id="signatureSuv" class="signature-pad"></canvas><br>
      <button onclick="clearSignature('signatureSuv')">Clear Signature</button>

      <div class="form-buttons">
        <button onclick="window.print()">Save / Print Form</button>
      </div>
    </div>
  </div>

  <script>
    function showForm(type) {
      document.getElementById('uteForm').style.display = (type === 'ute') ? 'block' : 'none';
      document.getElementById('suvForm').style.display = (type === 'suv') ? 'block' : 'none';
    }

    function placeMarker(event, element) {
      const markerType = document.querySelector('input[name="markerType"]:checked')?.value || 'X';
      const rect = element.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const y = event.clientY - rect.top;

      const marker = document.createElement("div");
      marker.className = "marker";
      marker.innerText = markerType;
      marker.style.left = x + "px";
      marker.style.top = y + "px";
      element.appendChild(marker);
    }

    function clearSignature(canvasId) {
      const canvas = document.getElementById(canvasId);
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    document.querySelectorAll("canvas").forEach(canvas => {
      const ctx = canvas.getContext("2d");
      let drawing = false;

      canvas.addEventListener("mousedown", e => { drawing = true; ctx.beginPath(); ctx.moveTo(e.offsetX, e.offsetY); });
      canvas.addEventListener("mousemove", e => { if (drawing) { ctx.lineTo(e.offsetX, e.offsetY); ctx.stroke(); }});
      canvas.addEventListener("mouseup", () => { drawing = false; });
      canvas.addEventListener("mouseout", () => { drawing = false; });

      // Touch support
      canvas.addEventListener("touchstart", e => {
        e.preventDefault();
        drawing = true;
        const touch = e.touches[0];
        ctx.beginPath();
        ctx.moveTo(touch.clientX - canvas.getBoundingClientRect().left, touch.clientY - canvas.getBoundingClientRect().top);
      });
      canvas.addEventListener("touchmove", e => {
        e.preventDefault();
        if (drawing) {
          const touch = e.touches[0];
          ctx.lineTo(touch.clientX - canvas.getBoundingClientRect().left, touch.clientY - canvas.getBoundingClientRect().top);
          ctx.stroke();
        }
      });
      canvas.addEventListener("touchend", () => { drawing = false; });
    });
  </script>
</body>
</html>
